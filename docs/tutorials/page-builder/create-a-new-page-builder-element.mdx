---
id: create-a-new-page-builder-element
title: Create a New Page Builder Element
sidebar_label: Create a New Element
keywords: ["webiny", "Page Builder", "landing pages", "page element"]
description: Create a new Page Builder element.
---

:::tip What you'll learn
- how to create a new Page Builder element
- how to register plugins in Webiny applications
:::

## Overview

Although the Page Builder app comes with a lot of ready-made page elements, at one point in time, you might need to create your own to satisfy your specific requirements.
To achieve that, we can utilize a couple of simple plugins, which is what we'll cover in this short tutorial.

## What We'll Build

We’ll create a new element that will allow content creators to embed content using an `iframe`.
Here's what the result will look like:

<!-- vale off -->

<img
  src={require("./assets/iframe-end.png").default}
  style={{ marginBottom: 20 }}
  alt="Iframe page element"
/>

<!-- vale on -->

## Prerequisites

This tutorial assumes you have already created a new Webiny project to work on.
We recommend reading our [install Webiny](/docs/tutorials/install-webiny) tutorial which will show you how to do it.

## Organization of Files

Although you can place and organize the plugin files as you see fit for your project, we recommend following some kind of structure that is easy to understand and maintain later on.

In this tutorial, we need to share code (a plugin) between `apps/admin` and `apps/website`.
So, we're going to create a folder named `pb-element-iframe` in `apps/extensions` which will contain all the code for plugins.

:::note
Don't forget to create `extensions` folder if it doesn't exist inside `apps` already.
:::

:::info
This is a very common scenario for Page Builder plugins because the Admin Area application  use the plugin to render element inside editor
and the Website application  need the same plugin to render element in the actual page.
:::

### Anatomy of Element Plugins

To create a new page element, we need to register two sets of plugins:
1. For the `admin` app:
   - a plugin that will define how it's rendered in the editor
   - a plugin that will define all the available settings and options for it
2. For the `website` app:
   - a plugin that will define how the page element is rendered on the actual page

To better organize files we'll write all the plugins needed for the Admin Area application and Website application in
`apps/extensions/pb-element-iframe/admin` and `apps/extensions/pb-element-iframe/render` respectively.

In the end the folder structure of our project will look similar to this:

```
// Config files are omitted for sake of brevity.

├── api
├── apps
│   ├── admin
│   ├── extensions
│   │   └── pb-element-iFrame
│   │       ├── admin
│   │       ├── render
│   │       ├── package.json
│   │       └── tsconfig.json
│   ├── theme
│   └── website
├── package.json
├── tsconfig.build.json
├── tsconfig.json
├── webiny.project.ts
└── yarn.lock
```

Now that we have covered a brief overview of what we need to do and how to organize files, let's get started with creating plugins.

## Create Plugins for the Admin Area Application

Click the **plus** icon located on the left sidebar of the editor to access all the available page elements:

<!-- vale off -->

<img
    src={require("./assets/iframe-add-element.png").default}
    style={{ marginBottom: 20 }}
    alt="Iframe page element"
/>

<!-- vale on -->

As mentioned, this list of page elements can be expanded and custom page elements can be created via plugins.
We will add the necessary plugins for Admin Area application in the `apps/extensions/pb-element-iframe/admin/index.tsx` file.

### Editor Element Plugin

We will start with the [`pb-editor-page-element`](/docs/references/page-builder/plugins#pb-editor-page-element) plugin type:
<!-- TODO: Add link to code file -->
```tsx title="apps/extensions/pb-element-iframe/admin/index.tsx"
// ...
// Some code is removed for sake of brevity.
// ...
import React from "react";
import { PbEditorPageElementPlugin, DisplayMode } from "@webiny/app-page-builder/types";
import { createInitialPerDeviceSettingValue } from "@webiny/app-page-builder/editor/plugins/elementSettings/elementSettingsUtils";

import { ReactComponent as IFrameIcon } from "./assets/iframe-icon.svg";
import IFrameEditor from "./components/IFrameEditor";

export default () => {
    return [
        {
            name: "pb-editor-page-element-iframe",
            type: "pb-editor-page-element",
            elementType: "iframe",
            toolbar: {
                // We use `pb-editor-element-group-media` to put our plugin into the Media group.
                title: "iFrame",
                group: "pb-editor-element-group-media",
                preview() {
                    return (
                        <PreviewBox>
                            <IFrameIcon />
                        </PreviewBox>
                    );
                }
            },
            settings: [
                "pb-editor-page-element-settings-delete",
                "pb-editor-page-element-style-settings-height"
            ],
            target: ["cell", "block"],
            onCreate: "open-settings",
            create(options) {
                /*
                    Create function is here to create the initial data
                    for the page element, which then is utilized in the
                    IFrameEditor component and in the element settings.
                */
                return {
                    type: "iframe",
                    elements: [],
                    data: {
                        iframe: {
                            // The URL property will be populated when user enters the URL in the element settings.
                            url: "",
                        },
                        settings: {
                            height: createInitialPerDeviceSettingValue(
                                { value: "370px" },
                                DisplayMode.DESKTOP
                            )
                        }
                    },
                    ...options
                };
            },
            render(props) {
                /*
                    Every render function receives the page element's
                    data assigned to the "element.data" property in
                    the received props. In here we will store the
                    "iframe.url" which will be provided via the page
                    element's settings.
                */
                return <IFrameEditor {...props} />;
            },
            renderElementPreview({ width, height }) {
                return <img style={{ width, height }} alt={"iFrame"} />;
            }
        } as PbEditorPageElementPlugin
    ];
};
```

The key properties of the plugin are the `create` and `render`.
They define the initial page element's settings and how it will be rendered in the editor, respectively.

The `data` property holds the initial state of the page element which can contain any data you might need.

The `toolbar` property helps us put our plugin into the toolbar.

Finally, it’s up to the `render` function to define how the page element will be rendered once the user drops it on the page.

:::note
Notice the `props` that were passed to the render function. This object contains all the relevant page element's data and settings.
:::

After [registering the plugin](#) in the Admin Area application  it will appear in editor toolbar similar to the pre-defined elements as shown below:

<!-- vale off -->

<img
  src={require("./assets/add-toolbar.gif").default}
  style={{ marginBottom: 20 }}
  alt="Editor Iframe page element"
/>

<!-- vale on -->

Now that we've covered the overall structure of plugin. Let's see what's inside `IframeEditor` component.
The following code snippet shows the entire `IframeEditor` component:
<!-- TODO: Add link to code file -->
```tsx title="apps/extensions/pb-element-iframe/admin/components/iframeEditor.tsx"
// ...
// Some code is removed for sake of brevity.
// ...

const IframeEditor = props => {
    const { element } = props;

    if (!element.data.iframe.url) {
        return (
            <PreviewBox>
                <IFrameIcon />
            </PreviewBox>
        );
    }

    return (
        <ElementRoot
            className={
                "webiny-pb-base-page-element-style webiny-pb-page-element-iframe " + outerWrapper
            }
            element={element}
        >
            <iframe src={element.data.iframe.url} width="100%" height="100%" />
        </ElementRoot>
    );
};

export default IframeEditor;
```

As you can see it's a simple React component which render an `iframe` HTML element.

:::note
Every element needs to have [`ElementRoot`](https://github.com/webiny/webiny-js/blob/v5/packages/app-page-builder/src/render/components/ElementRoot.tsx#L31)
component as root because it apply `styles, classes and attributes` to the element assigned via right sidebar style tab.
:::

:::info
Notice we've added [`webiny-pb-base-page-element-style`](https://github.com/webiny/webiny-js/blob/v5/apps/theme/pageBuilder/styles/base.scss#L59) CSS class.
Every element needs to have it as it contains all base styles applied by Page Builder app.
:::

:::tip
Notice we've added `webiny-pb-page-element-iframe` CSS class, which enables us to add custom CSS styling if needed.
:::

### Element Settings Plugin

The next plugin we'll need to define is the [`pb-editor-page-element-advanced-settings`](/docs/references/page-builder/plugins#pb-editor-page-element-advanced-settings),
which we will use to render the required UI for settings so the user can provide an iframe URL.
The settings UI will be shown automatically in the right sidebar when the user drag-and-drop the page element on the page.
<!-- TODO: Add link to code file -->
This plugin type will be added in the `apps/extensions/pb-element-iframe/admin/iframeSettings.tsx` file.

```tsx title="apps/extensions/pb-element-iframe/admin/iframeSettings.tsx"
// ...
// Some code is removed for sake of brevity.
// ...

export default {
    name: "pb-editor-page-element-advanced-settings-iframe",
    type: "pb-editor-page-element-advanced-settings",
    elementType: "iframe",
    render({ Bind, submit }) {
        return (
            <Accordion title={"IFrame"} defaultValue={true}>
                <React.Fragment>
                    <Bind name={"iframe.url"} validators={validation.create("required,url")}>
                        <Input label={"URL"} description={"Enter an iFrame URL"} />
                    </Bind>
                    <Grid className={classes.simpleGrid}>
                        <Cell span={12}>
                            {/*  @ts-ignore */}
                            <ButtonContainer>
                                {/*  @ts-ignore */}
                                <SimpleButton onClick={submit}>Save</SimpleButton>
                            </ButtonContainer>
                        </Cell>
                    </Grid>
                </React.Fragment>
            </Accordion>
        );
    }
} as PbEditorPageElementAdvancedSettingsPlugin;
```

As mentioned, this code will show the settings UI in sidebar and ask for the URL of the `iframe`, as shown below:

<!-- vale off -->

<img
  src={require("./assets/drop-iframe-element.gif").default}
  style={{ marginBottom: 20 }}
  alt="Iframe page element settings"
/>

<!-- vale on -->

### Render Element Plugin

As mentioned, every page element consists of two sets of plugins. We've already covered the editor side of the logic, now, let's also see the actual plugin that will render it to the page preview.

In order to render the element on the actual page, we will use the [`pb-render-page-element`](/docs/references/page-builder/plugins#pb-render-page-element) plugin.

We will add this plugin in the `apps/extensions/pb-element-iframe/render/index.tsx` file.
<!-- TODO: Add link to code file -->
```tsx title="apps/extensions/pb-element-iframe/render/index.tsx"
import React from "react";
import { PbRenderElementPlugin } from "@webiny/app-page-builder/types";

import IFrame from "./components/iFrame";

export default () =>
  ({
    name: "pb-render-page-element-iframe",
    type: "pb-render-page-element",
    elementType: "iframe",
    render({ element }) {
      return <IFrame element={element} />;
    }
  } as PbRenderElementPlugin);
```

The following code snippet shows the `IFrame` component:
<!-- TODO: Add link to code file -->
```tsx title="apps/extensions/pb-element-iframe/render/components/iFrame.tsx"
import { ElementRoot } from "@webiny/app-page-builder/render/components/ElementRoot";

//...
// Some code is removed for the sake of brevity.
//...

const IFrame = ({ element }) => {
  const { data } = element;
  // If the user didn't enter a URL, let's show a simple message.
  if (!data.iframe.url) {
    return <div>IFrame URL is missing.</div>;
  }

  // Otherwise, let's render the iframe.
    return (
        <ElementRoot
            className={
                "webiny-pb-base-page-element-style webiny-pb-page-element-embed-iframe " +
                outerWrapper
            }
            element={element}
        >
            <iframe src={data.iframe.url} width="100%" height="100%" />
        </ElementRoot>
    );
};

export default IFrame;
```

Along with the actual page, this plugin will also responsible for rendering the element in the page preview, as shown in the image below:

<!-- vale off -->

<img
  src={require("./assets/preview.png").default}
  style={{ marginBottom: 20 }}
  alt="Page preview inside editor"
/>

<!-- vale on -->

### Register Plugins in the Admin Area Application

Now that we've created plugins for `iFrame` element. We need to register them in `apps/admin` to work.
Let's make the following changes in `apps/admin/code/src/plugins/pageBuilder/editorPlugins.ts` file:

```ts title="apps/admin/code/src/plugins/pageBuilder/editorPlugins.ts"
// Some code is removed for the sake of brevity.
(...)

// Import the `iframe` element and it's settings
import iframeElement, { iframeSettings } from "@extensions/pb-element-iframe/admin";

export default [
    iframeElement(),
    iframeSettings,
    // Rest of the plugins
    (...)
];
```

And in `apps/admin/code/src/plugins/pageBuilder/renderPlugins.ts` file:

```ts title="apps/admin/code/src/plugins/pageBuilder/renderPlugins.ts"
// Some code is removed for the sake of brevity.
(...)

// Import the `iframe` element
import iframeElement from "@extensions/pb-element-iframe/render";

export default [
    // Elements
    iframeElement(),
    // Rest of the plugins
    (...)
];
```

After registering the plugins successfully you will see the `iframe` element in the Admin Area application as shown below:

<!-- vale off -->

<img
  src={require("./assets/iframe-element.gif").default}
  style={{ marginBottom: 20 }}
  alt="Editor Iframe page element"
/>

<!-- vale on -->

## Add Plugins in the Website Application

### Render Element Plugin

In order to render the page element on the website app, we will use the [`pb-render-page-element`](/docs/references/page-builder/plugins#pb-render-page-element) plugin again.
It is necessary to load our page element in the page.

<!-- TODO: Add link to code file -->
```tsx title="apps/extensions/pb-element-iframe/render/components/iFrame.tsx"
import { PbRenderElementPlugin } from "@webiny/app-page-builder/types";

import IFrame from "./components/iFrame";

export default () =>
  ({
    name: "pb-render-page-element-iframe",
    type: "pb-render-page-element",
    elementType: "iframe",
    render({ element }) {
      return <IFrame element={element} />;
    }
  } as PbRenderElementPlugin);
```

### Register Plugins in the Website Application

We need to register it inside `apps/website` so that, `iframe` element can be rendered in the Website application.

Make the following changes in `apps/website/code/src/plugins/pageBuilder.ts` file:
```ts title="apps/website/code/src/plugins/pageBuilder.ts"
// Some code is removed for the sake of brevity.
(...)


// Import `iframe` element
import iframeElement from "@extensions/pb-element-iframe/render";

export default [
    (...)

    // Page elements
    iframeElement(),
    (...)
];
```

After registering the plugins successfully the page element will be available in your Website application:

<!-- vale off -->

<img
  src={require("../assets/page-builder/iframe-website.png").default}
  style={{ marginBottom: 20 }}
  alt="Page preview inside editor"
/>

<!-- vale on -->

## Conclusion

Congratulations!! 🎉🥳

We've successfully created a custom page element for our Page Builder app.
Use similar approach to easily create a whole array of custom elements for Page Builder app.

You can also checkout the full code example in our [repo](https://github.com/webiny/webiny-examples/tree/master/iframe-page-element).
If you have further questions, feel free to [ask](https://www.webiny.com/slack) for additional help.
